from bs4 import BeautifulSoup
import requests

def web_scrape_calls():
    # Make sure to look at what ZipTax returns for Saint Francis
    AR_counties = ['Arkansas', 'Ashley', 'Baxter', 'Benton', 'Boone', 'Bradley', 'Calhoun', 'Carroll', 'Chicot',
                   'Clark', 'Clay', 'Cleburne', 'Cleveland', 'Columbia', 'Conway', 'Craighead', 'Crawford', 'Crittenden',
                   'Cross', 'Dallas', 'Desha', 'Drew', 'Faulkner', 'Franklin', 'Fulton', 'Garland', 'Grant', 'Greene', 'Hempstead',
                   'Hot Spring', 'Howard', 'Independence', 'Izard', 'Jackson', 'Jefferson', 'Johnson', 'Lafayette', 'Lawrence', 'Lee',
                   'Lincoln', 'Little River', 'Logan', 'Lonoke', 'Madison', 'Marion', 'Miller', 'Mississippi', 'Monroe',
                   'Montgomery', 'Nevada', 'Newton', 'Ouachita', 'Perry', 'Phillips', 'Pike', 'Poinsett', 'Polk', 'Pope', 'Prairie',
                   'Pulaski', 'Randolph', 'Saline', 'Scott', 'Searcy', 'Sebastian', 'Sevier', 'Sharp', 'Saint Francis', 'Stone',
                   'Union', 'Van Buren', 'Washington', 'White', 'Woodruff', 'Yell']

    AR_counties_json = """
    {
    "Arkansas":["72038", "72026", "72042", "72055", "72048", "72166", "72160", "72003", "72140"],
    "Ashley":["71646", "71658", "71635", "71642", "71676", "71663", "71661"],
    "Baxter":["72653", "72651", "72659", "72658", "72654", "72617", "72544", "72537", "72623", "72642", "72635", "72626"],
    "Benton":["72745", "72758", "72736", "72761", "72739", "72768", "72733", "72747", "72734", "72756", "72751", "72711", "72718", "72713", "72716", "72712", "72714", "72732", "72757", "72722", "72719", "72715"],
    "Boone":["72630", "72633", "72644", "72615", "72601", "72602", "72611", "72682", "72662"],
    "Bradley":["71651", "71647", "71671", "71631"],
    "Calhoun":["71744", "71745", "71766"],
    "Carroll":["72632", "72631", "72616", "72613", "72638", "72660"],
    "Chicot":["71653", "71640", "71638"],
    "Clark":["71721", "71728", "71999", "71923", "71921", "71772", "71998", "71743", "71920", "71962"],
    "Clay":["72454", "72453", "72456", "72464", "72422", "72424", "72461", "72470", "72435", "72441", "72430"],
    "Cleburne":["72530", "72523", "72179", "72543", "72581", "72546", "72545", "72067", "72044", "72130", "72131"],
    "Cleveland":["71660", "71665", "71652"],
    "Columbia":["71753", "71861", "71740", "71752", "71754", "71770"],
    "Conway":["72063", "72080", "72027", "72030", "72107", "72156", "72157", "72110", "72127"],
    "Craighead":["72403", "72402", "72416", "72417", "72419", "72401", "72405", "72447", "72437", "72411", "72404", "72421", "72414", "72467", "72427"],
    "Crawford":["72956", "72932", "72957", "72946", "72935", "72934", "72947", "72955", "72952", "72921", "72948"],
    "Crittenden":["72339", "72332", "72331", "72384", "72376", "72364", "72327", "72303", "72301", "72325"],
    "Cross":["72387", "72396", "72347", "72324", "72373"],
    "Dallas":["71763", "71748", "71725", "71742"],
    "Desha":["71654", "71662", "71630", "71639", "71666", "71674", "72379", "71666", "71670"],
    "Drew":["71656", "71655", "71657", "71677", "71675"],
    "Faulkner":["72035", "72034", "72033", "72032", "72047", "72173", "72111", "72106", "72058", "72061", "72181"],
    "Franklin":["72949", "72820", "72821", "72928", "72933", "72930"],
    "Fulton":["72576", "72554", "72520", "72515", "72531", "72539", "72538", "72578", "72583"],
    "Garland":["71902", "71968", "71914", "71949", "71956", "71909", "71964", "72087", "71901", "71903", "71913", "71910"],
    "Grant":["72128", "72150", "72129", "72057", "72084"],
    "Greene":["72436", "72412", "72425", "72450", "72443", "72451", "72474"],
    "Hempstead":["71847", "71838", "71862", "71855", "71802", "71801", "71831", "71825"],
    "Hot Spring":["71942", "72104", "71929", "71941", "71933"],
    "Howard":["71859", "71971", "71852", "71833", "71851"],
    "Independence":["72579", "72568", "72571", "72575", "72526", "72524", "72534", "72527", "72501", "72165", "72522", "72503", "72550", "72562", "72564", "72553"],
    "Izard":["72573", "72512", "72585", "72584", "72587", "72566", "72536", "72540", "72519", "72528", "72561", "72565", "72517", "72556"],
    "Jackson":["72471", "72014", "72473", "72169", "72005", "72075", "72431", "72043", "72112"],
    "Jefferson":["72079", "72168", "71611", "71659", "71603", "72132", "72004", "71612", "71601", "72152", "72133", "71613", "72175", "72073", "71602", "72182"],
    "Johnson":["72839", "72832", "72830", "72854", "72845", "72840", "72852", "72846"],
    "Lafayette":["71845", "71826", "71860", "71827"],
    "Lawrence":["72465", "72459", "72458", "72466", "72572", "72476", "72469", "72433", "72415", "72410", "72434", "72457", "72445", "72440"],
    "Lee":["72352", "72320", "72341", "72311", "72368", "72360"],
    "Lincoln":["71643", "71644", "71678", "71667"],
    "Little River":["71853", "71865", "71866", "71820", "71822", "71836"],
    "Logan":["72855", "72865", "72863", "72927", "72951", "72943", "72851", "72835", "72826"],
    "Lonoke":["72046", "72072", "72024", "72037", "72083", "72023", "72007", "72086", "72176"],
    "Madison":["72742", "72738", "72740", "72752", "72776", "72721", "72760", "72773"],
    "Marion":["72661", "72634", "72619", "72668", "72687", "72677", "72672"],
    "Miller":["71834", "71837", "71840", "71839", "71854"],
    "Mississippi":["72391", "72370", "72351", "72358", "72438", "72310", "72428", "72395", "72426", "72330", "72319", "72321", "72329", "72316", "72350", "72313", "72338", "72315", "72442"],
    "Monroe":["72134", "72021", "72029", "72108", "72069"],
    "Montgomery":["71966", "71965", "71970", "71969", "71960", "71957", "71935", "71961"],
    "Nevada":["71828", "71722", "71857", "71858", "71864", "71835"],
    "Newton":["72641", "72648", "72640", "72624", "72628", "72655", "72683", "72685", "72666", "72670"],
    "Ouachita":["71764", "71711", "71720", "71701", "71751", "71726"],
    "Perry":["72016", "72001", "72126", "72125", "72025", "72070"],
    "Phillips":["72312", "72328", "72333", "72366", "72355", "72353", "72367", "72390", "72383", "72389", "72369", "72342", "72374"],
    "Pike":["71952", "71950", "71940", "71958", "71943", "71922", "71959"],
    "Poinsett":["72377", "72432", "72429", "72365", "72475", "72472", "72354", "72386", "72479"],
    "Polk":["71973", "71972", "71937", "71932", "71944", "71945", "71953"],
    "Pope":["72847", "72843", "72858", "72856", "72802", "72801", "72679", "72811", "72837", "72823", "72812"],
    "Prairie":["72064", "72170", "72017", "72066", "72041", "72040"],
    "Pulaski":["72119", "72120", "72183", "72164", "72180", "72116", "72115", "72117", "72118", "72114", "72099", "72124", "72113", "72295", "72053", "72142", "72212", "72227", "72231", "72076", "72211", "72255", "72260", "72214", "72223", "72221", "72222", "72135", "72219", "72216", "72215", "72217", "72225", "72203", "72204", "72205", "72202", "72190", "72199", "72201", "72206", "72209", "72210", "72078", "72207"],
    "Randolph":["72460", "72413", "72455", "72444", "72449", "72478", "72462"],
    "Saline":["72022", "72122", "72065", "72158", "72019", "72011", "72002", "72018", "72015", "72089", "72167", "72103", "72103"],
    "Scott":["72958", "72926", "72950", "72944", "72841"],
    "Searcy":["72645", "72669", "72675", "72650", "72639", "72636", "72686"],
    "Sebastian":["72902", "72905", "72901", "72903", "72904", "72906", "72908", "72937", "72919", "72945", "72941", "72923", "72940", "72938", "72914", "72913", "72936", "72918", "72917", "72916"],
    "Sevier":["71823", "71842", "71846", "71832", "71841"],
    "Sharp":["72513", "72521", "72529", "72577", "72525", "72482", "72532", "72542", "72569"],
    "Saint Francis":["72394", "72335", "72340", "72372", "72348", "72336", "72392", "72359", "72346", "72326", "72322"],
    "Stone":["72560", "72680", "72555", "72051", "72533", "72567", "72657", "72663"],
    "Union":["71765", "71731", "71730", "71750", "71749", "71747", "71724", "71759", "71758", "71762"],
    "Van Buren":["72031", "72141", "72153", "72013", "72028", "72039", "72088", "72629"],
    "Washington":["72737", "72749", "72727", "72741", "72728", "72717", "72770", "72774", "72744", "72729", "72765", "72730", "72735", "72762", "72701", "72702", "72766", "72703", "72769", "72704", "72959", "72764", "72753"],
    "White":["72082", "72068", "72060", "72081", "72145", "72143", "72139", "72012", "72178", "72149", "72020", "72121", "72102", "72085", "72137", "72136", "72010", "72045", "72052"],
    "Woodruff":["72074", "72006", "72059", "72101", "72123", "72036"],
    "Yell":["72857", "72860", "72834", "72824", "72833", "72853", "72842", "72828", "72829", "72838", "72827"]
    }
    """

    json = ''

    for county in AR_counties:
        index = AR_counties.index(f'{county}')
        cleaned_county = AR_counties[index].replace(' ', '+')
        html = requests.get(f'https://www.getzips.com/cgi-bin/ziplook.exe?What=3&County={cleaned_county}&State=AR&Submit=Look+It+Up')
        soup = BeautifulSoup(html.text, 'html.parser')
        table_rows = soup.find_all('td')
        zips = []
        for td in table_rows:
            if td.get('width') == '15%' and td.text != 'ZIP':
                zips.append(td.text)
                print(zips)
        json += f'{county}:{zips},'
        print(json)
    clean_json(AR_counties_json)

def clean_json(AR_counties_json):
    cleaned_json = AR_counties_json.replace("'", '"')
    print(cleaned_json)

web_scrape_calls()
